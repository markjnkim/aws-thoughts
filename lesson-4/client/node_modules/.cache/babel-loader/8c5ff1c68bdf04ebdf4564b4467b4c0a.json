{"ast":null,"code":"var _jsxFileName = \"/Users/mkim1/Curriculum/continuation-courses/aws/module-1/project/main/client/src/components/ThoughtForm/index.js\";\nimport React, { useState, useRef } from 'react';\n\nconst ThoughtForm = () => {\n  const [formState, setFormState] = useState({\n    username: '',\n    thought: '',\n    image: ''\n  });\n  const [characterCount, setCharacterCount] = useState(0);\n  const fileInput = useRef(null);\n\n  const handleImageUpload = event => {\n    event.preventDefault();\n    const data = new FormData();\n    data.append('image', fileInput.current.files[0]); // post image to S3 bucket\n\n    const postImage = async () => {\n      try {\n        const res = await fetch('/api/image-upload', {\n          mode: 'cors',\n          method: 'POST',\n          body: data\n        });\n        if (!res.ok) throw new Error(res.statusText);\n        const postResponse = await res.json();\n        setFormState({ ...formState,\n          image: postResponse.Location\n        });\n        return postResponse.Location;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    postImage();\n  }; // update state based on form input changes\n\n\n  const handleChange = event => {\n    if (event.target.value.length <= 280) {\n      setFormState({ ...formState,\n        [event.target.name]: event.target.value\n      });\n      setCharacterCount(event.target.value.length);\n    }\n  }; // submit form\n\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    const postData = async () => {\n      const res = await fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formState)\n      });\n      const data = await res.json();\n      console.log(data);\n    };\n\n    postData(); // clear form value\n\n    setFormState({\n      username: '',\n      thought: '',\n      image: ''\n    });\n    setCharacterCount(0);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: `m-0 ${characterCount === 280 ? 'text-error' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, \"Character Count: \", characterCount, \"/280\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex-row justify-center justify-space-between-md align-stretch\",\n    onSubmit: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Name\",\n    name: \"username\",\n    value: formState.username,\n    className: \"form-input col-12 \",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Here's a new thought...\",\n    name: \"thought\",\n    value: formState.thought,\n    className: \"form-input col-12 \",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-input col-12  p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"Add an image to your thought:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    ref: fileInput,\n    className: \"form-input p-2 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn \",\n    onClick: handleImageUpload,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Upload\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn col-12 \",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n};\n\nexport default ThoughtForm;","map":{"version":3,"sources":["/Users/mkim1/Curriculum/continuation-courses/aws/module-1/project/main/client/src/components/ThoughtForm/index.js"],"names":["React","useState","useRef","ThoughtForm","formState","setFormState","username","thought","image","characterCount","setCharacterCount","fileInput","handleImageUpload","event","preventDefault","data","FormData","append","current","files","postImage","res","fetch","mode","method","body","ok","Error","statusText","postResponse","json","Location","error","console","log","handleChange","target","value","length","name","handleFormSubmit","postData","headers","Accept","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\n\nconst ThoughtForm = () => {\n  const [formState, setFormState] = useState({ username: '', thought: '', image: '' });\n  const [characterCount, setCharacterCount] = useState(0);\n  const fileInput = useRef(null);\n  \n  const handleImageUpload = event => {\n    event.preventDefault();\n    const data = new FormData();\n    data.append('image', fileInput.current.files[0]);\n    // post image to S3 bucket\n    const postImage = async () => {\n      try {\n        const res = await fetch('/api/image-upload', {\n          mode: 'cors',\n          method: 'POST',\n          body: data\n        })\n        if (!res.ok) throw new Error(res.statusText);\n        const postResponse = await res.json();\n        setFormState({...formState, image: postResponse.Location})\n        return postResponse.Location;\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    postImage();\n  };\n\n  // update state based on form input changes\n  const handleChange = event => {\n    if (event.target.value.length <= 280) {\n      setFormState({ ...formState, [event.target.name]: event.target.value });\n      setCharacterCount(event.target.value.length);\n    }\n  };\n\n  // submit form\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    const postData = async () => {\n      const res = await fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formState)\n      })\n      const data = await res.json();\n      console.log(data);\n    }\n\n    postData();\n\n    // clear form value\n    setFormState({ username: '', thought: '', image: '' });\n    setCharacterCount(0);\n  };\n\n  return (\n    <div>\n      <p \n        className={`m-0 ${characterCount === 280 ? 'text-error' : ''}`}\n      >\n        Character Count: {characterCount}/280\n      </p>\n      <form\n        className=\"flex-row justify-center justify-space-between-md align-stretch\"\n        onSubmit={handleFormSubmit}\n      >\n        <input\n          placeholder=\"Name\"\n          name=\"username\"\n          value={formState.username}\n          className=\"form-input col-12 \"\n          onChange={handleChange}\n        ></input>\n        <textarea\n          placeholder=\"Here's a new thought...\"\n          name=\"thought\"\n          value={formState.thought}\n          className=\"form-input col-12 \"\n          onChange={handleChange}\n        ></textarea>\n        <label className=\"form-input col-12  p-1\">\n          Add an image to your thought: \n          <input\n            type=\"file\"\n            ref={fileInput}\n            className=\"form-input p-2 \"\n          />\n          <button \n            className=\"btn \" \n            onClick={handleImageUpload} \n            type=\"submit\"\n          >\n            Upload\n          </button>\n        </label> \n      \n        <button \n          className=\"btn col-12 \" \n          type=\"submit\"\n        >\n          Submit\n          </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ThoughtForm;\n"]},"metadata":{},"sourceType":"module"}